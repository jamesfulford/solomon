(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1038:function(module,exports,__webpack_require__){},1039:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(411).configure)([__webpack_require__(1040),__webpack_require__(1041)],module,!1)}).call(this,__webpack_require__(214)(module))},1040:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=1040},1041:function(module,exports,__webpack_require__){var map={"./components/currency/Currency.stories.tsx":1042,"./pages/plan/rules/AddEditRule/AddEditRule.stories.tsx":1050,"./pages/plan/rules/rule/Rule.stories.tsx":1057};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1041},1042:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Zero",(function(){return Zero})),__webpack_require__.d(__webpack_exports__,"Positive",(function(){return Positive})),__webpack_require__.d(__webpack_exports__,"Negative",(function(){return Negative})),__webpack_require__.d(__webpack_exports__,"NegativeRound",(function(){return NegativeRound}));var _Users_jamesfulford_solomon_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21),_Currency__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(0),__webpack_require__(126)),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5);__webpack_exports__.default={title:"Currency",component:_Currency__WEBPACK_IMPORTED_MODULE_2__.a,argTypes:{value:{control:"number"}}};var Template=function Template(args){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Currency__WEBPACK_IMPORTED_MODULE_2__.a,Object(_Users_jamesfulford_solomon_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({},args))},Zero=Template.bind({});Zero.args={value:0};var Positive=Template.bind({});Positive.args={value:42.4};var Negative=Template.bind({});Negative.args={value:-12.1};var NegativeRound=Template.bind({});NegativeRound.args={value:-12},Zero.parameters=Object(_Users_jamesfulford_solomon_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({storySource:{source:"(args: CurrencyProps) => <Currency {...args} />"}},Zero.parameters),Positive.parameters=Object(_Users_jamesfulford_solomon_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({storySource:{source:"(args: CurrencyProps) => <Currency {...args} />"}},Positive.parameters),Negative.parameters=Object(_Users_jamesfulford_solomon_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({storySource:{source:"(args: CurrencyProps) => <Currency {...args} />"}},Negative.parameters),NegativeRound.parameters=Object(_Users_jamesfulford_solomon_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__.a)({storySource:{source:"(args: CurrencyProps) => <Currency {...args} />"}},NegativeRound.parameters)},1043:function(module,exports,__webpack_require__){},1045:function(module,exports,__webpack_require__){},1046:function(module,exports,__webpack_require__){},1050:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Pristine",(function(){return Pristine})),__webpack_require__.d(__webpack_exports__,"Editing",(function(){return Editing})),__webpack_require__.d(__webpack_exports__,"PristineWithHighLow",(function(){return PristineWithHighLow})),__webpack_require__.d(__webpack_exports__,"EditingWithHighLow",(function(){return EditingWithHighLow}));var objectSpread2=__webpack_require__(21),react=__webpack_require__(0),regenerator=__webpack_require__(317),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(526),slicedToArray=__webpack_require__(106),objectWithoutProperties=__webpack_require__(531),src=__webpack_require__(8),formik_esm=(__webpack_require__(1045),__webpack_require__(56)),hebrew=__webpack_require__(127);function workingStateRRuleToString(rrule){if("YEARLY-HEBREW"===rrule.freq)return"X-YEARLY-HEBREW: ".concat(rrule.byhebrewmonth||1,", ").concat(rrule.byhebrewday||1);if("ONCE"===rrule.freq)return new src.a({freq:src.a.YEARLY,count:1,dtstart:rrule.dtstart?new Date(rrule.dtstart):void 0}).toString();var freq=rrule.freq,rruleOptions=Object(objectSpread2.a)(Object(objectSpread2.a)({},rrule),{},{freq:freq,dtstart:rrule.dtstart?new Date(rrule.dtstart):void 0,until:rrule.until?new Date(rrule.until):void 0,bymonthday:freq===src.a.MONTHLY?rrule.bymonthday:void 0,byweekday:freq===src.a.WEEKLY?rrule.byweekday:void 0,count:void 0,wkst:void 0,bymonth:void 0,byhour:void 0,byminute:void 0,bysecond:void 0,byweekno:void 0,byeaster:void 0});return delete rruleOptions.byhebrewmonth,delete rruleOptions.byhebrewday,new src.a(rruleOptions).toString()}function stringToWorkingStateRRule(rrulestring){var _parsedOptions$dtstar,_parsedOptions$until,hebrewExtraction=Object(hebrew.b)(rrulestring);if(hebrewExtraction)return Object(objectSpread2.a)({freq:"YEARLY-HEBREW"},hebrewExtraction);var rrule=src.a.fromString(rrulestring),libraryInferredOptions=rrule.options,parsedOptions=rrule.origOptions;if(parsedOptions.freq=Number(parsedOptions.freq),![src.a.YEARLY,src.a.MONTHLY,src.a.WEEKLY,void 0].includes(parsedOptions.freq))throw new Error("Unsupported frequency specified in rule: "+rrulestring);var freq=parsedOptions.freq,dtstart=null===(_parsedOptions$dtstar=parsedOptions.dtstart)||void 0===_parsedOptions$dtstar?void 0:_parsedOptions$dtstar.toISOString().split("T")[0],until=null===(_parsedOptions$until=parsedOptions.until)||void 0===_parsedOptions$until?void 0:_parsedOptions$until.toISOString().split("T")[0];return Object(objectSpread2.a)(Object(objectSpread2.a)({},parsedOptions),{},{freq:1===libraryInferredOptions.count?"ONCE":freq,dtstart:dtstart,until:until})}function convertWorkingStateToApiRuleMutate(fields,flags){var labels=Object(objectSpread2.a)({},fields.labels);return(null==flags?void 0:flags.highLowEnabled)&&(labels.uncertainty=Boolean(fields.lowvalue||fields.highvalue),labels.uncertainty&&(labels.highUncertainty=fields.highvalue?Number(fields.highvalue):Number(fields.value),labels.lowUncertainty=fields.lowvalue?Number(fields.lowvalue):Number(fields.value))),{name:fields.name,value:Number(fields.value),rrule:workingStateRRuleToString(fields.rrule),labels:labels}}var defaultValues={rrule:{freq:src.a.MONTHLY,bymonthday:1,interval:1,dtstart:"",until:""},lowvalue:"",value:"",highvalue:"",name:"",labels:{}};var RulePreview=__webpack_require__(236),Container=__webpack_require__(532),jsx_runtime=__webpack_require__(5);function frequencyIsIn(freq,freqs){return freqs.includes(freq)}var AddEditRule_AddEditRule_AddEditRule=function AddEditRule(_ref){var onDeselect=_ref.onDeselect,props=Object(objectWithoutProperties.a)(_ref,["onDeselect"]),_useState=Object(react.useState)(!1),_useState2=Object(slicedToArray.a)(_useState,2),isExpanded=_useState2[0],setIsExpanded=_useState2[1],isRuleSelected=Boolean(props.rule),shouldBeExpanded=isRuleSelected||isExpanded;return Object(jsx_runtime.jsxs)(Container.a,{className:"justify-content-middle text-center mt-2",children:[Object(jsx_runtime.jsx)("button",{className:"call-to-action mb-3 p-0",style:{width:50,height:50,borderRadius:"50%"},onClick:function onClick(){if(isRuleSelected)return onDeselect(),void setIsExpanded(!1);setIsExpanded((function(e){return!e}))},children:shouldBeExpanded?"-":"+"}),shouldBeExpanded&&Object(jsx_runtime.jsx)(AddEditRule_AddEditRuleForm,Object(objectSpread2.a)({},props))]})},AddEditRule_AddEditRuleForm=function AddEditRuleForm(_ref2){var ValueInputMode,onCreate=_ref2.onCreate,onUpdate=_ref2.onUpdate,onDelete=_ref2.onDelete,rule=_ref2.rule,_ref2$highLowEnabled=_ref2.highLowEnabled,highLowEnabled=void 0!==_ref2$highLowEnabled&&_ref2$highLowEnabled,_useState3=Object(react.useState)(!1),_useState4=Object(slicedToArray.a)(_useState3,2),intentionToCopy=_useState4[0],setIntentionToCopy=_useState4[1],canUpdate=Boolean(rule&&"id"in rule);function _submit(){return(_submit=Object(asyncToGenerator.a)(regenerator_default.a.mark((function _callee(fields,_ref3){var setSubmitting,final;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:setSubmitting=_ref3.setSubmitting,_context.prev=1,final=convertWorkingStateToApiRuleMutate(fields,{highLowEnabled:highLowEnabled}),_context.next=9;break;case 5:return _context.prev=5,_context.t0=_context.catch(1),console.error(_context.t0),_context.abrupt("return");case 9:if(canUpdate&&!intentionToCopy){_context.next=14;break}return _context.next=12,onCreate(final);case 12:_context.next=16;break;case 14:return _context.next=16,onUpdate(final);case 16:setSubmitting(!1);case 17:case"end":return _context.stop()}}),_callee,null,[[1,5]])})))).apply(this,arguments)}!function(ValueInputMode){ValueInputMode.VALUE="VALUE",ValueInputMode.HIGH_MID_LOW="HIGH_MID_LOW"}(ValueInputMode||(ValueInputMode={}));var _useState5=Object(react.useState)(ValueInputMode.VALUE),_useState6=Object(slicedToArray.a)(_useState5,2),valueInputMode=_useState6[0],setValueInputMode=_useState6[1],initialValues=function ruleToWorkingState(rule){var _rule$labels,_rule$labels2;return rule?{rrule:stringToWorkingStateRRule(rule.rrule),name:rule.name,labels:rule.labels,value:String(rule.value),lowvalue:String((null==rule||null===(_rule$labels=rule.labels)||void 0===_rule$labels?void 0:_rule$labels.lowUncertainty)||""),highvalue:String((null==rule||null===(_rule$labels2=rule.labels)||void 0===_rule$labels2?void 0:_rule$labels2.highUncertainty)||"")}:defaultValues}(rule);return Object(jsx_runtime.jsx)(formik_esm.d,{initialValues:initialValues,onSubmit:function submit(_x,_x2){return _submit.apply(this,arguments)},children:function children(props){var currentRule,_freq=props.getFieldMeta("rrule.freq").value,freq=frequencyIsIn(_freq,["ONCE","YEARLY-HEBREW"])?_freq:Number(_freq),byweekday=props.getFieldMeta("rrule.byweekday").value||[],interval=props.getFieldMeta("rrule.interval").value||1;try{currentRule=convertWorkingStateToApiRuleMutate(props.getFieldMeta("").value,{highLowEnabled:highLowEnabled})}catch(_unused){console.warn("Was not able to convert to rule",props.getFieldMeta("").value)}return Object(jsx_runtime.jsxs)(formik_esm.c,{children:[Object(jsx_runtime.jsxs)("div",{className:"form-inline d-flex justify-content-between",children:[Object(jsx_runtime.jsx)(formik_esm.a,{name:"name",children:function children(_ref4){var field=_ref4.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"Name",className:"sr-only",children:"Rule name"}),Object(jsx_runtime.jsx)("input",Object(objectSpread2.a)({className:"form-control form-control-sm sl-input",id:"Name",placeholder:"Rule name",type:"text",required:!0,maxLength:50},field))]})}}),valueInputMode===ValueInputMode.VALUE&&Object(jsx_runtime.jsx)(formik_esm.a,{name:"value",children:function children(_ref5){var field=_ref5.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"Value",className:"sr-only",children:"Value"}),Object(jsx_runtime.jsx)("input",Object(objectSpread2.a)({className:"form-control form-control-sm sl-input",id:"Value",placeholder:"Value $",type:"text",maxLength:19,required:!0,pattern:"-?[1-9][0-9]*\\.?[0-9]{0,2}"},field))]})}}),highLowEnabled&&Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("button",{type:"button",className:"btn btn-link",onClick:function onClick(){return setValueInputMode((function(x){return x===ValueInputMode.VALUE?ValueInputMode.HIGH_MID_LOW:ValueInputMode.VALUE}))},children:"I'm uncertain how much this will be"}),valueInputMode===ValueInputMode.HIGH_MID_LOW&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(formik_esm.a,{name:"lowvalue",children:function children(_ref6){var field=_ref6.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"LowValue",className:"sr-only",children:"Bad (25%) Case Value"}),Object(jsx_runtime.jsx)("input",Object(objectSpread2.a)({className:"form-control form-control-sm sl-input",id:"LowValue",placeholder:"Bad (25%) Case Value $",type:"text",pattern:"-?[0-9]+\\.?[0-9]{0,2}?"},field))]})}}),Object(jsx_runtime.jsx)(formik_esm.a,{name:"value",children:function children(_ref7){var field=_ref7.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"Value",className:"sr-only",children:"Expected Case Value"}),Object(jsx_runtime.jsx)("input",Object(objectSpread2.a)({className:"form-control form-control-sm sl-input",id:"Value",placeholder:"Expected Case Value $",type:"text",pattern:"-?[0-9]+\\.?[0-9]{0,2}?"},field))]})}}),Object(jsx_runtime.jsx)(formik_esm.a,{name:"highvalue",children:function children(_ref8){var field=_ref8.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"HighValue",className:"sr-only",children:"Good (75%) Case Value"}),Object(jsx_runtime.jsx)("input",Object(objectSpread2.a)({className:"form-control form-control-sm sl-input",id:"HighValue",placeholder:"Good (75%) Case Value $",type:"text",pattern:"-?[0-9]+\\.?[0-9]{0,2}?"},field))]})}})]})]})]}),Object(jsx_runtime.jsxs)("div",{className:"form-inline mt-2 d-flex justify-content-between",children:[Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(formik_esm.a,{name:"rrule.freq",children:function children(_ref9){var field=_ref9.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"Frequency",className:"sr-only",children:"Frequency"}),Object(jsx_runtime.jsxs)("select",Object(objectSpread2.a)(Object(objectSpread2.a)({className:"form-control form-control-sm pl-1 pr-1",id:"Frequency"},field),{},{children:[Object(jsx_runtime.jsx)("option",{value:"ONCE",children:"Once"}),Object(jsx_runtime.jsxs)("optgroup",{label:"Recurring",children:[Object(jsx_runtime.jsxs)("option",{value:src.a.WEEKLY,children:["Week",interval>1&&"s"]}),Object(jsx_runtime.jsxs)("option",{value:src.a.MONTHLY,children:["Month",interval>1&&"s"]}),Object(jsx_runtime.jsxs)("option",{value:src.a.YEARLY,children:["Year",interval>1&&"s"]})]}),Object(jsx_runtime.jsx)("optgroup",{label:"Hebrew Calendar",children:Object(jsx_runtime.jsx)("option",{value:"YEARLY-HEBREW",children:"Hebrew Year"})})]}))]})}}),frequencyIsIn(freq,[src.a.YEARLY,src.a.MONTHLY,src.a.WEEKLY])&&Object(jsx_runtime.jsx)(formik_esm.a,{name:"rrule.interval",children:function children(_ref10){var field=_ref10.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"Interval",className:"sr-only",children:"Interval"}),Object(jsx_runtime.jsx)("input",Object(objectSpread2.a)({className:"form-control form-control-sm sl-input ml-2",style:{width:48},id:"Interval",placeholder:"Interval",type:"number",min:"1"},field))]})}})]}),frequencyIsIn(freq,[src.a.MONTHLY])&&Object(jsx_runtime.jsx)(formik_esm.a,{name:"rrule.bymonthday",children:function children(_ref11){var field=_ref11.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"bymonthday",className:"sr-only",children:"Day of month"}),Object(jsx_runtime.jsx)("input",Object(objectSpread2.a)({className:"form-control form-control-sm sl-input",id:"bymonthday",placeholder:"Day",style:{width:64},type:"number",min:"1",max:"31",required:!0},field))]})}}),frequencyIsIn(freq,["YEARLY-HEBREW"])&&Object(jsx_runtime.jsx)(formik_esm.a,{name:"rrule.byhebrewmonth",children:function children(_ref12){var field=_ref12.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"byhebrewmonth",className:"sr-only",children:"Month"}),Object(jsx_runtime.jsx)("select",Object(objectSpread2.a)(Object(objectSpread2.a)({className:"form-control form-control-sm",id:"byhebrewmonth",placeholder:"Month",required:!0},field),{},{children:Array.from(hebrew.c.entries()).map((function(_ref13){var _ref14=Object(slicedToArray.a)(_ref13,2),value=_ref14[0],display=_ref14[1];return Object(jsx_runtime.jsx)("option",{value:value,children:display})}))}))]})}}),frequencyIsIn(freq,["YEARLY-HEBREW"])&&Object(jsx_runtime.jsx)(formik_esm.a,{name:"rrule.byhebrewday",children:function children(_ref15){var field=_ref15.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"byhebrewday",className:"sr-only",children:"Day"}),Object(jsx_runtime.jsx)("input",Object(objectSpread2.a)({className:"form-control form-control-sm sl-input",id:"byhebrewday",placeholder:"Day",style:{width:64},type:"number",min:"1",max:"30",required:!0},field))]})}}),frequencyIsIn(freq,[src.a.WEEKLY])&&Object(jsx_runtime.jsx)("div",{role:"group",className:"btn-group","aria-label":"Days of Week","data-testid":"dayofweekcontrol",children:Object(jsx_runtime.jsx)(formik_esm.b,{name:"rrule.byweekday",children:function children(arrayHelpers){var days=[{rruleday:src.a.SU.weekday,displayday:"S"},{rruleday:src.a.MO.weekday,displayday:"M"},{rruleday:src.a.TU.weekday,displayday:"T"},{rruleday:src.a.WE.weekday,displayday:"W"},{rruleday:src.a.TH.weekday,displayday:"T"},{rruleday:src.a.FR.weekday,displayday:"F"},{rruleday:src.a.SA.weekday,displayday:"S"}];return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:days.map((function(_ref16){var rruleday=_ref16.rruleday,displayday=_ref16.displayday;return Object(jsx_runtime.jsx)("button",{type:"button",className:"btn btn-sm "+(byweekday.includes(rruleday)?"btn-primary":"btn-outline-primary"),"data-dayofweek":rruleday,onClick:function onClick(e){e.preventDefault(),e.stopPropagation(),byweekday.includes(rruleday)?arrayHelpers.remove(byweekday.indexOf(rruleday)):arrayHelpers.push(rruleday)},children:displayday},rruleday.toString())}))})}})})]}),frequencyIsIn(freq,[src.a.YEARLY,src.a.MONTHLY,src.a.WEEKLY,"ONCE"])&&Object(jsx_runtime.jsxs)("div",{className:"form-inline mt-2 d-flex justify-content-between",children:[Object(jsx_runtime.jsx)(formik_esm.a,{name:"rrule.dtstart",children:function children(_ref17){var field=_ref17.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"Start",className:"sr-only",children:"Start"}),Object(jsx_runtime.jsx)("input",Object(objectSpread2.a)({className:"form-control form-control-sm ",placeholder:"Start Date",id:"Start",type:"date",required:interval>1||frequencyIsIn(freq,["ONCE",src.a.YEARLY]),style:{width:150}},field))]})}}),frequencyIsIn(freq,[src.a.YEARLY,src.a.MONTHLY,src.a.WEEKLY])&&Object(jsx_runtime.jsx)(formik_esm.a,{name:"rrule.until",children:function children(_ref18){var field=_ref18.field;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"End",className:"sr-only",children:"End:"}),Object(jsx_runtime.jsx)("input",Object(objectSpread2.a)({className:"form-control form-control-sm",placeholder:"End Date",id:"End",style:{width:150},type:"date"},field))]})}})]}),Object(jsx_runtime.jsx)("div",{className:"p-0 m-0 mt-2 text-center",children:Object(jsx_runtime.jsx)(RulePreview.a,{rule:currentRule})}),Object(jsx_runtime.jsxs)("div",{className:"d-flex flex-row-reverse justify-content-between",children:[Object(jsx_runtime.jsxs)("div",{className:"d-flex flex-row-reverse align-items-center",style:{overflow:"clip"},children:[Object(jsx_runtime.jsx)("button",{className:"button-secondary mb-2 mt-2",children:!canUpdate||intentionToCopy?"Create":"Update ".concat(null==rule?void 0:rule.name)}),canUpdate&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("label",{className:"mb-1 mr-3",htmlFor:"intentionToCopy",children:"Copy"}),Object(jsx_runtime.jsx)("input",{id:"intentionToCopy",type:"checkbox",className:"mr-2",checked:intentionToCopy,onChange:function onChange(e){return setIntentionToCopy(e.target.checked)}})]})]}),canUpdate&&Object(jsx_runtime.jsx)("button",{type:"button",className:"button-secondary text-danger btn-sm mb-2 mt-2",onClick:function onClick(e){e.preventDefault(),e.stopPropagation(),onDelete()},children:"Delete"})]})]})}})};try{AddEditRule_AddEditRule_AddEditRule.displayName="AddEditRule",AddEditRule_AddEditRule_AddEditRule.__docgenInfo={description:"",displayName:"AddEditRule",props:{onDeselect:{defaultValue:null,description:"",name:"onDeselect",required:!0,type:{name:"() => void"}},onCreate:{defaultValue:null,description:"",name:"onCreate",required:!0,type:{name:"(rule: IApiRuleMutate) => Promise<void>"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(rule: IApiRuleMutate) => Promise<void>"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => Promise<void>"}},rule:{defaultValue:null,description:"",name:"rule",required:!1,type:{name:"IApiRuleMutate"}},highLowEnabled:{defaultValue:{value:"false"},description:"",name:"highLowEnabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/plan/rules/AddEditRule/AddEditRule.tsx#AddEditRule"]={docgenInfo:AddEditRule_AddEditRule_AddEditRule.__docgenInfo,name:"AddEditRule",path:"src/pages/plan/rules/AddEditRule/AddEditRule.tsx#AddEditRule"})}catch(__react_docgen_typescript_loader_error){}try{AddEditRule_AddEditRuleForm.displayName="AddEditRuleForm",AddEditRule_AddEditRuleForm.__docgenInfo={description:"",displayName:"AddEditRuleForm",props:{onCreate:{defaultValue:null,description:"",name:"onCreate",required:!0,type:{name:"(rule: IApiRuleMutate) => Promise<void>"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(rule: IApiRuleMutate) => Promise<void>"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => Promise<void>"}},rule:{defaultValue:null,description:"",name:"rule",required:!1,type:{name:"IApiRuleMutate"}},highLowEnabled:{defaultValue:{value:"false"},description:"",name:"highLowEnabled",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/plan/rules/AddEditRule/AddEditRule.tsx#AddEditRuleForm"]={docgenInfo:AddEditRule_AddEditRuleForm.__docgenInfo,name:"AddEditRuleForm",path:"src/pages/plan/rules/AddEditRule/AddEditRule.tsx#AddEditRuleForm"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"AddEditRuleForm",component:AddEditRule_AddEditRuleForm,argTypes:{}};var AddEditRule_stories_Template=function Template(args){return Object(jsx_runtime.jsx)(AddEditRule_AddEditRuleForm,Object(objectSpread2.a)({},args))},Pristine=AddEditRule_stories_Template.bind({});Pristine.args={};var Editing=AddEditRule_stories_Template.bind({});Editing.args={rule:{name:"Groceries",rrule:"FREQ=WEEKLY;INTERVAL=1;BYDAY=SU",value:-120}};var PristineWithHighLow=AddEditRule_stories_Template.bind({});PristineWithHighLow.args={highLowEnabled:!0};var EditingWithHighLow=AddEditRule_stories_Template.bind({});EditingWithHighLow.args={rule:{name:"Groceries",rrule:"FREQ=WEEKLY;INTERVAL=1;BYDAY=SU",value:-120},highLowEnabled:!0},Pristine.parameters=Object(objectSpread2.a)({storySource:{source:"(args: AddEditRuleFormProps) => <AddEditRuleForm {...args} />"}},Pristine.parameters),Editing.parameters=Object(objectSpread2.a)({storySource:{source:"(args: AddEditRuleFormProps) => <AddEditRuleForm {...args} />"}},Editing.parameters),PristineWithHighLow.parameters=Object(objectSpread2.a)({storySource:{source:"(args: AddEditRuleFormProps) => <AddEditRuleForm {...args} />"}},PristineWithHighLow.parameters),EditingWithHighLow.parameters=Object(objectSpread2.a)({storySource:{source:"(args: AddEditRuleFormProps) => <AddEditRuleForm {...args} />"}},EditingWithHighLow.parameters)},1056:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));var client_api=__webpack_require__(1062),esm=__webpack_require__(7),parameters=(__webpack_require__(1037),__webpack_require__(1038),{actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},backgrounds:{default:"dark"}});function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.b)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.c)(loader,!1)}));case"parameters":return Object(client_api.d)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.d)(v,!1);default:return console.log(key+" was not supported :( !")}}))},1057:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Simple",(function(){return Simple})),__webpack_require__.d(__webpack_exports__,"Selected",(function(){return Selected}));var objectSpread2=__webpack_require__(21),react=__webpack_require__(0),Currency=(__webpack_require__(1046),__webpack_require__(126)),RulePreview=__webpack_require__(236),jsx_runtime=__webpack_require__(5);var Rule_Rule=function Rule(_ref){var rule=_ref.rule,_ref$onClick=_ref.onClick,showModal=void 0===_ref$onClick?function(){}:_ref$onClick,selected=_ref.selected,editButtonHandler=Object(react.useCallback)((function(){return showModal(rule.id,rule)}),[rule,showModal]),rruleString=function getRRuleDisplayString(rruleString){try{var message=Object(RulePreview.b)(rruleString).message;if(!message)throw new Error(message);return message}catch(e){return"(Oops, looks like an invalid recurrence rule)"}}(rule.rrule);return Object(jsx_runtime.jsxs)("div",{className:"ruledescription p-2 ".concat(selected?"ruledescription-selected":""),onClick:editButtonHandler,children:[Object(jsx_runtime.jsxs)("div",{className:"btn-toolbar justify-content-between",role:"toolbar","aria-label":"Toolbar with button groups",children:[Object(jsx_runtime.jsx)("div",{className:"btn-group mr-2",role:"group","aria-label":"First group",children:Object(jsx_runtime.jsx)("div",{className:"rulename",children:Object(jsx_runtime.jsx)("h5",{className:"m-0",title:rule.name,children:rule.name})})}),Object(jsx_runtime.jsx)("div",{className:"btn-group mr-2",role:"group","aria-label":"Second group",children:Object(jsx_runtime.jsx)(Currency.a,{value:rule.value})})]}),Object(jsx_runtime.jsx)("p",{className:"m-0",children:rruleString})]})};try{Rule_Rule.displayName="Rule",Rule_Rule.__docgenInfo={description:"",displayName:"Rule",props:{rule:{defaultValue:null,description:"",name:"rule",required:!0,type:{name:"IApiRule"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((id: string, rule: IApiRule) => void)"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/plan/rules/rule/Rule.tsx#Rule"]={docgenInfo:Rule_Rule.__docgenInfo,name:"Rule",path:"src/pages/plan/rules/rule/Rule.tsx#Rule"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"Rule",component:Rule_Rule,argTypes:{}};var Rule_stories_Template=function Template(args){return Object(jsx_runtime.jsx)(Rule_Rule,Object(objectSpread2.a)({},args))},Simple=Rule_stories_Template.bind({});Simple.args={rule:{id:"1",userid:"a",name:"Rule Name",rrule:"FREQ=WEEKLY;INTERVAL=1;COUNT=4",value:1}};var Selected=Rule_stories_Template.bind({});Selected.args={rule:{id:"1",userid:"a",name:"Rule Name",rrule:"FREQ=WEEKLY;INTERVAL=1;COUNT=4",value:1},selected:!0},Simple.parameters=Object(objectSpread2.a)({storySource:{source:"(args: RuleProps) => <Rule {...args} />"}},Simple.parameters),Selected.parameters=Object(objectSpread2.a)({storySource:{source:"(args: RuleProps) => <Rule {...args} />"}},Selected.parameters)},126:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Currency}));__webpack_require__(0),__webpack_require__(1043);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),formatter=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2});var Currency=function Currency(_ref){var value=_ref.value,presentedValue=function formatCurrency(value){return formatter.format(value)}(value);return value<0?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"currency-negative",children:presentedValue}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"currency-positive",children:presentedValue})};try{Currency.displayName="Currency",Currency.__docgenInfo={description:"",displayName:"Currency",props:{value:{defaultValue:null,description:"US Dollar Amount to be displayed.",name:"value",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/currency/Currency.tsx#Currency"]={docgenInfo:Currency.__docgenInfo,name:"Currency",path:"src/components/currency/Currency.tsx#Currency"})}catch(__react_docgen_typescript_loader_error){}},127:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return hebrewMonthToDisplayNameMap})),__webpack_require__.d(__webpack_exports__,"a",(function(){return convertHebrewMonthToDisplayName})),__webpack_require__.d(__webpack_exports__,"b",(function(){return extractHebrew}));var _Users_jamesfulford_solomon_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(106),hebrewMonthToDisplayNameMap=new Map([[1,"Nisan"],[2,"Iyyar"],[3,"Sivan"],[4,"Tammuz"],[5,"Av"],[6,"Elul"],[7,"Tishrei"],[8,"Heshvan"],[9,"Kislev"],[10,"Tevet"],[11,"Shevat"],[12,"Adar"]]);function convertHebrewMonthToDisplayName(month){return hebrewMonthToDisplayNameMap.get(month)}function extractHebrew(rrulestring){if(rrulestring.startsWith("X-YEARLY-HEBREW:"))try{var _rrulestring$replaceA=rrulestring.replaceAll("X-YEARLY-HEBREW:","").split(",").map(Number),_rrulestring$replaceA2=Object(_Users_jamesfulford_solomon_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_rrulestring$replaceA,2);return{byhebrewmonth:_rrulestring$replaceA2[0],byhebrewday:_rrulestring$replaceA2[1]}}catch(_unused){throw new Error("Invalid Hebrew date format: ".concat(rrulestring))}}},236:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getPreviewDetails})),__webpack_require__.d(__webpack_exports__,"a",(function(){return RulePreview}));var _Users_jamesfulford_solomon_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(106),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),rrule__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8),_components_currency_Currency__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(126),_hebrew__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(127),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5),getPreviewDetails=function getPreviewDetails(rrulestring){if(!rrulestring)return{};var rrule,hebrewExtraction=Object(_hebrew__WEBPACK_IMPORTED_MODULE_4__.b)(rrulestring);if(hebrewExtraction)return{message:"every ".concat(Object(_hebrew__WEBPACK_IMPORTED_MODULE_4__.a)(hebrewExtraction.byhebrewmonth)," ").concat(hebrewExtraction.byhebrewday)};try{rrule=rrule__WEBPACK_IMPORTED_MODULE_2__.a.fromString(rrulestring)}catch(_unused){console.warn("Unable to parse rrule from string ",rrulestring)}if(!rrule)return{};var isOnce=1===rrule.origOptions.count;return isOnce?{message:"once on ".concat(rrule.all()[0].toISOString().split("T")[0]),isOnce:isOnce,rrule:rrule}:{message:rrule.toText(),isOnce:isOnce,rrule:rrule}};function RulePreview(_ref){var rule=_ref.rule,value=null==rule?void 0:rule.value,_useMemo=Object(react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((function(){return getPreviewDetails(null==rule?void 0:rule.rrule)}),[rule]),_useMemo$message=_useMemo.message,message=void 0===_useMemo$message?"...":_useMemo$message,isOnce=_useMemo.isOnce,rrule=_useMemo.rrule,_useMemo2=Object(react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((function(){return isOnce||!rrule?[void 0,void 0]:rrule.all((function(d,index){return index<=1})).map((function(d){return d.toISOString().split("T")[0]}))}),[isOnce,rrule]),_useMemo3=Object(_Users_jamesfulford_solomon_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useMemo2,2),next=_useMemo3[0],oneAfter=_useMemo3[1];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("p",{className:"m-0",children:[value&&Number.isFinite(value)?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_components_currency_Currency__WEBPACK_IMPORTED_MODULE_3__.a,{value:value}):"Occurs"," ",message]}),next&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("p",{className:"m-0",children:["Next is ",next,oneAfter&&", then ".concat(oneAfter)]})]})}try{RulePreview.displayName="RulePreview",RulePreview.__docgenInfo={description:"",displayName:"RulePreview",props:{rule:{defaultValue:null,description:"",name:"rule",required:!0,type:{name:"IApiRuleMutate | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/plan/rules/AddEditRule/RulePreview.tsx#RulePreview"]={docgenInfo:RulePreview.__docgenInfo,name:"RulePreview",path:"src/pages/plan/rules/AddEditRule/RulePreview.tsx#RulePreview"})}catch(__react_docgen_typescript_loader_error){}try{getPreviewDetails.displayName="getPreviewDetails",getPreviewDetails.__docgenInfo={description:"",displayName:"getPreviewDetails",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/pages/plan/rules/AddEditRule/RulePreview.tsx#getPreviewDetails"]={docgenInfo:getPreviewDetails.__docgenInfo,name:"getPreviewDetails",path:"src/pages/plan/rules/AddEditRule/RulePreview.tsx#getPreviewDetails"})}catch(__react_docgen_typescript_loader_error){}},553:function(module,exports,__webpack_require__){__webpack_require__(554),__webpack_require__(840),__webpack_require__(841),__webpack_require__(1047),__webpack_require__(1048),__webpack_require__(1053),__webpack_require__(1054),__webpack_require__(1052),__webpack_require__(1049),__webpack_require__(1055),__webpack_require__(1056),module.exports=__webpack_require__(1039)},655:function(module,exports){},683:function(module,exports){},731:function(module,exports){},788:function(module,exports){},841:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(411)}},[[553,2,3]]]);